<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <script>
      // Initialize the dataLayer
      window.dataLayer = window.dataLayer || [];
    </script>
    <meta charset="utf-8">
    <title>Test Site for Apollo Training</title>

    <!-- Google Tag Manager -->
    <script>
      (function(w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : '';
        j.async = true;
        j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, 'script', 'dataLayer', 'GTM-NC9DR9BQ');
    </script>
    <!-- End Google Tag Manager -->
    <link rel="stylesheet" href="styles.css">
  </head>

  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript>
      <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NC9DR9BQ" height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>
    <!-- End Google Tag Manager (noscript) -->

    <div class="header"></div>

    <h1>Further</h1>
    <div class="image">
      <img src="Further.png" alt="Avatar">
    </div>
    <div class="summary">
      <p>Test Site for Apollo Training</p>
    </div>

    <div class="container">
      <!-- Social Media Buttons -->
      <div class="link">
        <button class="btn btn-success" data-url="https://www.instagram.com/">Instagram</button>
      </div>
      <div class="link">
        <button class="btn btn-success" data-url="https://www.twitch.tv/">Twitch</button>
      </div>
      <div class="link">
        <button class="btn btn-success" data-url="https://www.tiktok.com/">Tiktok</button>
      </div>
      <div class="link">
        <button class="btn btn-success" data-url="https://www.youtube.com/">Youtube</button>
      </div>
    </div>

    <div class="footer">
      <img class="logo" src="Hittin'.png" alt="logo">
    </div>

    <script>
      // Ensure the dataLayer exists
      window.dataLayer = window.dataLayer || [];

      // Add event listeners to all buttons with class "btn-success"
      document.querySelectorAll(".btn-success").forEach(function (button) {
        button.addEventListener("click", function () {
          const linkUrl = button.getAttribute("data-url");

          // Open the link in a new tab
          window.open(linkUrl, '_blank');

          // Push event data to the dataLayer
          window.dataLayer.push({
            detailed_event: "Social Media Clicks",
            event: "social_media_click",
            event_data: {
              link_url: linkUrl
            },
            page_data: {
              page_location: window.location.href
            }
          });

          console.log(`Event tracked for ${linkUrl}`);
        });
      });
    </script>
  </body>
</html>

